(()=>{"use strict";new class{constructor(t){this.widget=void 0,this.cardList=void 0,this.inputForm=void 0,this.cardNumber=t}drow(){const t=document.querySelector("body");this.widget=document.createElement("widget"),this.widget.classList.add("widget");const e=document.createElement("h1");e.classList.add("text"),e.textContent="Check your credit card number",this.widget.appendChild(e),this.cardList=document.createElement("div"),this.cardList.classList.add("cardList"),this.inputForm=document.createElement("form"),this.inputForm.method="post",this.inputForm.classList.add("inputForm"),t.appendChild(this.widget),this.widget.appendChild(this.cardList),this.widget.appendChild(this.inputForm),this.drowCards(),this.drowForm()}drowCards(){for(let t=0;t<this.cardNumber;t+=1){const e=document.createElement("div");e.classList.add("card"),e.classList.add(`card-${t+1}`),this.cardList.appendChild(e)}}drowForm(){for(let t=0;t<2;t+=1){const t=document.createElement("div");this.inputForm.appendChild(t)}const t=document.createElement("input");t.type="text",t.name="card-number",t.id="card-number",t.placeholder="Credit card number",this.inputForm.firstChild.appendChild(t);const e=document.createElement("button");e.type="submit",e.id="sumbitNumber",e.textContent="Click to Validate",this.inputForm.lastChild.appendChild(e)}getWidget(){return this.drow()}}(6).drow();(new class{constructor(){this.input=void 0,this.char=null,this.type=void 0,this.cardList=void 0}addLisiners(){this.input=document.getElementById("card-number"),this.input.oninput=t=>{this.char=t.target.value,this.checkCard(),this.showTypeOfCard()},this.input.onkeyup=t=>{const e=document.querySelector(".tooltip");"Backspace"===t.key&&this.char.slice(-1).charCodeAt()>48&&this.char.slice(-1).charCodeAt()<58&&e&&e.remove()}}addTooltip(){if(0===Array.from(document.querySelectorAll(".tooltip")).length){const t=document.createElement("div");t.classList.add("tooltip"),t.textContent="Please insert a cregit card number",this.input.after(t)}}checkCard(){(this.char.slice(-1).charCodeAt()<48||this.char.slice(-1).charCodeAt()>58)&&this.addTooltip()}showTypeOfCard(){if(this.cardList=Array.from(document.getElementsByClassName("card")),void 0!==this.char[0]){if(this.char[0].charCodeAt()>48&&this.char[0].charCodeAt()<58&&this.cardList.forEach((t=>{t.classList.add("card-fade")})),"4"===this.char[0]){document.querySelector(".card-1").classList.remove("card-fade")}if("5"===this.char[0]){if("0"===this.char[1]||"6"===this.char[1]||"7"===this.char[1]||"8"===this.char[1]){document.querySelector(".card-6").classList.remove("card-fade")}if("1"===this.char[1]||"2"===this.char[1]||"3"===this.char[1]||"4"===this.char[1]){document.querySelector(".card-2").classList.remove("card-fade")}}if("2"===this.char[0]){document.querySelector(".card-3").classList.remove("card-fade")}if("6"===this.char[0]){document.querySelector(".card-4").classList.remove("card-fade")}if("3"===this.char[0]){document.querySelector(".card-5").classList.remove("card-fade")}}}}).addLisiners();(new class{constructor(){this.inputForm=void 0,this.input=void 0,this.button=void 0,this.widget=void 0}luhnChech(t){this.numQuantity=t.length;let e=0,i=!1,s=0;if(""===t||"0"===t||"NaN"===t)return!1;for(let e=0;e<this.numQuantity;e+=1)s+=t[e];if(0===s)return!1;for(let s=this.numQuantity-1;s>=0;s-=1){let r=t[s].charCodeAt()-"0".charCodeAt();!0===i&&(r*=2),e+=parseInt(r/10,10),e+=r%10,i=!i}return e%10==0}luhn(t){this.widget=document.querySelector(".widget");const e=document.createElement("div");return e.classList.add("mess"),this.widget.after(e),this.luhnChech(t)?(e.textContent="This is a valid card",e.classList.add("valid"),!0):(e.textContent="This is not a valid card",e.classList.add("invalid"),!1)}getCardNumber(){this.inputForm=document.querySelector(".inputForm"),this.input=this.inputForm.querySelector("input"),this.button=this.inputForm.querySelector("button"),this.button.onclick=t=>{if(t.preventDefault(),!this.input.value.match(/^\d{13,21}$/)){this.button.classList.add("card-fade");const t=document.createElement("div");return t.classList.add("tooltip"),t.textContent="Недопустимый формат карты",this.button.after(t),this.input.value="",void setTimeout((()=>{this.button.classList.remove("card-fade"),t.remove()}),1e3)}this.luhn(this.input.value)}}}).getCardNumber()})();